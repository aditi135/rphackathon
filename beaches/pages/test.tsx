"use client";

import styles from "../styles/main.module.css";
import Head from "next/head";
import Beaches from "../components/Beaches.js"
import BeachTab from "../components/BeachTab.js"
import {useState, useEffect} from "react"


export default function Map() {

  const [beaches, setBeaches] = useState([]);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    async function fetchBeaches() {
      try {
        const response = await fetch('/beaches.json');
        
        const data = await response.json();
        console.log('hello!');
        console.log(data);
        setBeaches(data);
      } catch (error) {
        console.error('Error fetching beach data:', error);
      } finally {
        setIsLoading(false);
      }
    }
    fetchBeaches();
  }, []);
    return (
      <>
        <Head>
          <title>Beach Advisory</title>
          <meta name="description" content="Generated by create next app" />
          <meta name="viewport" content="width=device-width, initial-scale=1" />
          <link rel="icon" href="/favicon.ico" />
        </Head>

        <main className={styles.container}>
          <h1>Beach Advisory</h1>

          <div className={styles.columns}>
            <div className={styles.left}>
              <h1>Left</h1>
              <div className={styles.googlemap}>
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d190255.43573730247!2d-87.89677241525762!3d41.83387098183924!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x880e2c3cd0f4cbed%3A0xafe0a6ad09c0c000!2sChicago%2C%20IL!5e0!3m2!1sen!2sus!4v1719433279149!5m2!1sen!2sus"
                width={600}
                height={450}
                style={{ border: '0' }}
                allowFullScreen={true}
                loading="lazy"
                referrerPolicy="no-referrer-when-downgrade"
              ></iframe>
              </div>
            </div>

            <div className={styles.right}>
              <h2>Results - Right</h2>
              {beaches.map((beach) => (
                <BeachTab beach={beach} key={beach.id}/>
              ))}
            </div>

          </div>


        </main>

      </>


    )
  }
